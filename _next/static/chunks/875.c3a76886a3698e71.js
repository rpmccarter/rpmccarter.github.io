"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{6081:function(e,t){t.Vl=void 0;var n,r,o,i=RegExp((n||(r=['\ns*                     # Leading whitespace\n(?=(                      # Mimic "(?>)" -> http://blog.stevenlevithan.com/archives/mimic-atomic-groups\n  ([^s\\\'"]+)          # Normal words\n  |                       #\n  \'([^\']*)\'              # Stuff in single quotes\n  |                       #\n  "((?:[^"\\]|\\.)*)"    # Stuff in double quotes\n  |                       #\n  (\\.?)                  # Escaped character\n  |                       #\n  (S)                    # Garbage\n))1                      #\n(s|$)?                 # Seperator\n'],o=['\n\\s*                     # Leading whitespace\n(?=(                      # Mimic "(?>)" -> http://blog.stevenlevithan.com/archives/mimic-atomic-groups\n  ([^\\s\\\\\\\'\\"]+)          # Normal words\n  |                       #\n  \'([^\\\']*)\'              # Stuff in single quotes\n  |                       #\n  "((?:[^\\"\\\\]|\\\\.)*)"    # Stuff in double quotes\n  |                       #\n  (\\\\.?)                  # Escaped character\n  |                       #\n  (\\S)                    # Garbage\n))\\1                      #\n(\\s|$)?                 # Seperator\n'],Object.defineProperty?Object.defineProperty(r,"raw",{value:o}):r.raw=o,n=r)).raw[0].replace(/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,""),"m");function a(e,t){var n=[],r="",o="";return!function(e,t,n){for(var r,o="";e.length;)(r=e.match(t))?(o+=e.slice(0,r.index)+n(r),e=e.slice(r.index+r[0].length)):(o+=e,e="")}(e,i,function(e){var i=e[0],a=e[2],s=e[3],c=e[4],l=e[5],d=e[6],u=e[7];if("string"==typeof d)throw Error("Unmatched quote");if(o+=i,r+=a||s||c&&c.replace(/\\([$`"\\\n])/g,"$1")||(l||"").replace(/\\(.)/g,"$1"),"string"==typeof u||""===s||""===c)return n.push(r),"function"==typeof t&&t(o),o="",r=""}),r&&(n.push(r),"function"==typeof t&&t(o)),n}function s(e){return e?e.replace(/[^A-Za-z0-9_\-.,:+\/@\n]/g,"\\$&").replace(/\n/g,"'\n'"):"''"}function c(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(s(r))}return t.join(" ")}t.Vl=a,new function(){this.split=a,this.escape=s,this.join=c}},7875:function(e,t,n){let r,o;n.r(t),n.d(t,{default:function(){return eh}});var i,a,s,c=n(3827),l=n(4090);function d(e){let{char:t}=e;return(0,c.jsx)("span",{className:"animate-blink whitespace-pre",children:null!=t?t:" "})}let u=(e,t)=>{let n=(0,l.useCallback)(n=>{("string"==typeof e?n.key===e:e.includes(n.key))&&(n.preventDefault(),null==t||t(n.key))},[t,e]);(0,l.useEffect)(()=>(addEventListener("keydown",n),()=>removeEventListener("keydown",n)),[n])};var f=n(7259);function m(e){let{submitLine:t,prompt:n,autocomplete:r}=e,[o,i]=(0,l.useState)(""),[a,s]=(0,l.useState)(0),[m,p]=(0,l.useState)("");!function(e){let t=(0,l.useCallback)(t=>{t.metaKey||t.ctrlKey||t.key.length>1||(t.preventDefault(),null==e||e(t.key))},[e]);(0,l.useEffect)(()=>(addEventListener("keydown",t),()=>removeEventListener("keydown",t)),[t])}(e=>{i(t=>t.substring(0,a)+e+t.substring(a)),s(e=>e+1)}),(0,f.x)("a","ctrlKey",()=>s(0)),(0,f.x)("e","ctrlKey",()=>s(o.length)),(0,f.x)("Backspace","metaKey",()=>{i(""),s(0)}),(0,f.x)("u","ctrlKey",()=>{p(o),i(""),s(0)}),(0,f.x)("y","ctrlKey",()=>{i(o.slice(0,a)+m+o.slice(a)),s(e=>e+m.length)}),u("Enter",()=>{t(o)}),u("Tab",async()=>{let e=await r(o);i(e),s(e.length)}),u("Backspace",()=>{i(e=>e.substring(0,a-1)+e.substring(a)),s(e=>Math.max(e-1,0))}),u("ArrowLeft",()=>{s(e=>Math.max(e-1,0))}),u("ArrowRight",()=>{s(e=>Math.min(e+1,o.length))});let h=o.substring(0,a),w=o.codePointAt(a),g=void 0!==w?String.fromCodePoint(w):void 0,y=o.substring(a+1);return(0,c.jsxs)("div",{className:"whitespace-pre max-w-full text-wrap break-all",children:[n,h,(0,c.jsx)(d,{char:g},a),y]})}var p=n(6081);class h{add(e){let t=this.data;for(let n of e)t.rest[n]||(t.rest[n]={rest:{},end:!1}),t=t.rest[n];t.end=!0}has(e){let t=this.data;for(let n of e){let e=t.rest[n];if(void 0===e)return!1;t=e}return t.end}autocomplete(e){let t=this.data;for(let n of e){let e=t.rest[n];if(void 0===e)return{matchType:"none"};t=e}let n=[];for(;1===Object.keys(t.rest).length&&!t.end;){let e=Object.entries(t.rest)[0];if(void 0===e)throw Error("invariant error: first element of array undefined");let[r,o]=e;n.push(r),t=o}let r=e+n.join("");return 0===Object.keys(t.rest).length?{matchType:"one",match:r}:{matchType:"many",prefix:r,matches:h.getWords(t,r)}}allWords(){return h.getWords(this.data)}static getWords(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.entries(e.rest).flatMap(e=>{let[n,r]=e;return this.getWords(r,t+n)});return e.end&&n.push(t),n}constructor(e){this.data={rest:{},end:!1},null==e||e.forEach(e=>this.add(e))}}let w="rdid",g="wdid";async function y(e){let t=(await e.text()).split("\n").map(e=>{let[t,n,r]=e.split("	",2);if(void 0===t||void 0===n||void 0!==r)throw Error("directory data corrupted");let o=parseInt(n);if(isNaN(o))throw Error("invalid inode number");return[t,o]});return new Map(t)}function b(e){let t=Array.from(e.entries()).map(e=>e.join("	")).join("\n");return new Blob([t])}async function v(e){let t=e.objectStore("inodes"),n=e.objectStore("blobs");async function r(e){let r=new Date,o=await n.add(e);return await t.add({mode:"file",size:e.size,accessedTime:r,modifiedTime:r,createdTime:r,linkCount:1,blobId:o})}async function o(e,i){let a=await n.add(new Blob),s=new Date,c=await t.add({mode:"directory",size:0,accessedTime:s,modifiedTime:s,createdTime:s,linkCount:1,blobId:a}),l=new Map([[".",c],["..",null!=i?i:c]]);for(let[t,n]of e.entries())if(n instanceof Blob){let e=await r(n);l.set(t,e)}else{let e=await o(n,c);l.set(t,e)}let d=b(l);return await n.put(d,a)}let i=await o(I,void 0);localStorage.setItem(w,i.toString()),localStorage.setItem(g,i.toString()),localStorage.setItem("wd","/"),localStorage.setItem("owd","/")}function E(e){return new Blob(["[InternetShortcut]\nURL=".concat(e,"\n")])}let I=new Map([["README.md",new Blob(["# rmsh (Ronan McCarter Shell)\n\nrmsh is a browser-based shell, which attempts to emulate the bash shell and some common bash commands.\n\nI started this project because I wanted to build something cool and interactive for my personal website,\nand since I've always loved the experience of navigating and exploring via the shell, I figured I'd give\nothers the opportunity to do the same.\n\nThe file system is backed by IndexedDB, and implements a lite version of Linux inodes.\n\nThe behavior of all commands is intended to replicate their behavior on My Machine (darwin 24.1.0).\nOnly a few commands have been implemented, and many of those lack some functionality or other.\n\nThe code for this project can be found at https://github.com/rpmccarter/rpmccarter.github.io\n"])],["links",new Map([["linkedin.url",E("https://linkedin.com/in/rpmccarter")],["email.txt",new Blob([[".com","gmail","@","rpmccarter"].reverse().join("")])],["github.url",E("https://github.com/rpmccarter")],["resume.url",E("https://drive.google.com/file/d/1GTAgIQ32n6Cb3OlDoY1keHmf3O-AMpSu/view?usp=drive_link")],["repo.url",E("https://github.com/rpmccarter/rpmccarter.github.io")]])],["experience",new Map([["mintlify.txt",new Blob(["mintlify\nfounding engineer\napr 2023 – jan 2025\nsan francisco, ca\n\n- incepted, implemented, and launched self-serve authenticated docs for enterprise customers\n- updated AWS infrastructure, unlocking autoscaling, improving observability, and simplifying deployments\n- rebuilt customer-facing local development tool, 10x’ing install speed, first page load speed, and hot-reload speed\n- crafted engineer interview process, creating 7 technical assessments and conducting hundreds of interviews\n- replaced 3,000-line Go microservice with 100 lines of TypeScript\n- rearchitected Next.js frontend and API playground, while vastly simplifying React state management\n- performed codebase-wide security audit, fixing several vulnerabilities and protecting against future issues\n\nused TypeScript, Next.js, Express, AWS, MongoDB\n"])],["retool.txt",new Blob(["retool\nsoftware engineer, full stack\njul 2022 - mar 2023\nsan francisco, ca\n\n- expanded in-house feature flagging framework to enable targeting specific customers by plan in staged rollout\n- implemented passwordless login across all mobile devices and reduced friction in SSO account creation flows\n- drove product adoption by curating a first experience for new Retool Mobile users\n- developed user-facing sample Retool apps leveraged by go-to-market team in product launches\n\nused TypeScript, React, Redux, SQL, Sequelize\n"])],["amazon.txt",new Blob(["amazon\nsoftware development engineer intern\nmay 2021 - aug 2021\nboston, ma\n\n- automated UI testing of 40 user experiences across 14 Alexa-enabled devices, saving the team at least 4\nengineer-hours per week and drastically decreasing human error\n- architected and deployed a scalable serverless UI testing solution using AWS’s infrastructure-as-code\n- optimized performance for long-term high-volume storage and bursts of computation-intensive traffic\n\nused TypeScript, AWS CDK, Jest\n"])],["stelo.txt",new Blob(["stelo e-commerce startup\nlead engineer, full stack\njul 2020 - may 2022\nnotre dame, in\n\n- designed/implemented MVP , consisting of iOS app and Python backend, for e-commerce apparel platform\n- directed product roadmap and feature prioritization by communicating realistic milestones to founders\n\nused Swift, Python, Django REST, Heroku\n"])]])],["education.txt",new Blob(["university of notre dame\nbachelor of science, computer science\nmay 2022\nnotre dame, in\n3.97/4.00 gpa\n"])]]),S=(e,t)=>t.some(t=>e instanceof t),T=new WeakMap,x=new WeakMap,N=new WeakMap,k={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return T.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return j(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function j(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(j(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)});return N.set(t,e),t}(e);if(x.has(e))return x.get(e);let n="function"==typeof(t=e)?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(O(this),n),j(this.request)}:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return j(t.apply(O(this),n))}:(t instanceof IDBTransaction&&function(e){if(T.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)});T.set(e,t)}(t),S(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,k):t;return n!==e&&(x.set(e,n),N.set(n,e)),n}let O=e=>N.get(e),B=["get","getKey","getAll","getAllKeys","count"],D=["put","add","delete","clear"],A=new Map;function M(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(A.get(t))return A.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,o=D.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||B.includes(n)))return;let i=async function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];let s=this.transaction(e,o?"readwrite":"readonly"),c=s.store;return r&&(c=c.index(i.shift())),(await Promise.all([c[n](...i),o&&s.done]))[0]};return A.set(t,i),i}k={...i=k,get:(e,t,n)=>M(e,t)||i.get(e,t,n),has:(e,t)=>!!M(e,t)||i.has(e,t)};let L=["continue","continuePrimaryKey","advance"],C={},R=new WeakMap,W=new WeakMap,P={get(e,t){if(!L.includes(t))return e[t];let n=C[t];return n||(n=C[t]=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];R.set(this,W.get(this)[t](...n))}),n}};async function*z(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=this;if(r instanceof IDBCursor||(r=await r.openCursor(...t)),!r)return;let o=new Proxy(r,P);for(W.set(o,r),N.set(o,O(r));r;)yield o,r=await (R.get(o)||r.continue()),R.delete(o)}function K(e,t){return t===Symbol.asyncIterator&&S(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&S(e,[IDBIndex,IDBObjectStore])}k={...a=k,get:(e,t,n)=>K(e,t)?z:a.get(e,t,n),has:(e,t)=>K(e,t)||a.has(e,t)};let V=function(e,t){let{blocked:n,upgrade:r,blocking:o,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=indexedDB.open("fs",1),s=j(a);return r&&a.addEventListener("upgradeneeded",e=>{r(j(a.result),e.oldVersion,e.newVersion,j(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{i&&e.addEventListener("close",()=>i()),o&&e.addEventListener("versionchange",e=>o(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("fs",1,{upgrade(e,t,n,r){e.createObjectStore("inodes",{autoIncrement:!0}),e.createObjectStore("blobs",{autoIncrement:!0}),v(r)}});function G(e){let t=new Set,n=[],r=!0;for(let o of e)if(r){if("-"===o)r=!1;else if(o.startsWith("-"))for(let e=1;e<o.length;e++){let n=o.at(e);if(void 0===n)break;if("-"===n){let n=o.slice(e+1);""===n?r=!1:t.add(n);break}t.add(n)}else r=!1,n.push(o)}else n.push(o);return{flags:t,positionals:n}}class U extends Error{constructor(e,t){super(t),this.code=e}}async function $(e,t){let n=e.transaction(["inodes","blobs"],"readonly"),r=n.objectStore("inodes"),o=n.objectStore("blobs"),i=await r.get(t);if(!i)throw new U("ENOENT","directory inode not found");if("directory"!==i.mode)throw new U("ENOTDIR","inode not a directory");let{blobId:a,modifiedTime:s}=i,c=await o.get(a);if(!c)throw new U("ENOENT","directory blob not found");return{directoryContents:await y(c),modifiedTime:s}}async function q(e,t){let n=t.split("/").filter(Boolean),r=localStorage.getItem(s.isAbsolute(t)?w:g);if(null===r)throw Error("missing inode id");let o=parseInt(r);if(isNaN(o))throw Error("invalid inode id");return _(e,o,n)}async function _(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(void 0===n[r])return t;let{directoryContents:o}=await $(e,t),i=o.get(n[r]);if(void 0===i)throw new U("ENOENT","no such file or directory");return _(e,i,n,r+1)}async function Y(e,t){let n=await q(e,t);return await $(e,n)}async function F(e,t){let n=await q(e,t),r=await e.transaction(["inodes"],"readonly").objectStore("inodes").get(n);if(void 0===r)throw new U("ENOENT","inode not found");return r}function X(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return async(t,n)=>{let r=n.lastIndexOf("/"),o=n.slice(r+1),i=n.slice(0,r+1),{directoryContents:a}=await Y(await V,i),s=[];for(let t of a.keys())"."!==t&&".."!==t&&(e?"directory"===(await F(await V,i+t)).mode&&s.push(t):s.push(t));if(0===s.length)return{matchType:"none"};let c=new h(s).autocomplete(o);if("none"===c.matchType)return c;if("one"===c.matchType)return"directory"===(await F(await V,i+c.match)).mode?{matchType:"many",prefix:i+c.match+"/",matches:[]}:{matchType:"one",match:i+c.match};let l=[];for(let e of c.matches){let t=await F(await V,i+e);l.push(e+("directory"===t.mode?"/":""))}return{matchType:"many",prefix:i+c.prefix,matches:l}}}async function H(e,t){try{let{directoryContents:n}=await Y(await V,e),r=Array.from(n.keys()).filter(e=>t||!e.startsWith("."));return{status:"success",path:e,entries:r}}catch(t){return{status:"failure",path:e,reason:t}}}!function(e){function t(e){return e.startsWith("/")}e.isAbsolute=t,e.normalize=function(e){let n=t(e),r=e.endsWith("/"),o=e.split("/").filter(Boolean),i=[];for(let e of o)"."!==e&&(".."===e?n||0!==i.length&&".."!==i.at(-1)?i.pop():i.push(".."):i.push(e));let a=i.join("/");return""===a?n?"/":".":(n?"/":"")+a+(r?"/":"")}}(s||(s={}));let Q={executor:async(e,t)=>{let{flags:n,positionals:r}=G(e),o=n.has("a");0===r.length&&r.push(".");let i=await Promise.all(r.map(e=>H(e,o)));if(1===i.length&&i[0]){let e=i[0];t("failure"===e.status?e.reason instanceof U&&"ENOENT"===e.reason.code?"ls: ".concat(e.path,": no such file or directory"):"ls: ".concat(e.path,": unknown error: ").concat(e.reason):e.entries.join("\n"))}else{let e=!1;for(let n of i)"failure"===n.status?t(n.reason instanceof U&&"ENOENT"===n.reason.code?"ls: ".concat(n.path,": no such file or directory"):"ls: ".concat(n.path,": unknown error: ").concat(n.reason)):(t((e?"\n":"")+"".concat(n.path,":\n")+n.entries.join("\n")),e=!0)}return 0},autocompleter:X()};async function J(e,t){var n;let r=t.split("/").filter(Boolean),o=s.isAbsolute(t),i=null!==(n=r.pop())&&void 0!==n?n:".",a=(o?"/":"")+r.join("/"),c=await q(e,a),{directoryContents:l,modifiedTime:d}=await Y(e,a);if(l.has(i))throw new U("EEXIST","file already exists");let u=e.transaction(["inodes","blobs"],"readwrite"),f=u.objectStore("inodes"),m=u.objectStore("blobs"),p=await f.get(c);if(!p)throw new U("ENOENT","directory inode not found");if(p.modifiedTime>d)throw new U("EIO","directory inode write race condition");let h=new Date,w=await m.add(new Blob),g=b(new Map([[".",w],["..",c]]));await m.put(g,w);let y=await f.add({mode:"directory",size:0,accessedTime:h,modifiedTime:h,createdTime:h,linkCount:1,blobId:w});l.set(i,y);let v=b(l);await m.put(v,p.blobId),await f.put({...p,accessedTime:h,modifiedTime:h},c)}let Z={executor:async(e,t)=>{let{positionals:n}=G(e);if(0===n.length)return t("mkdir: must supply directory name"),64;let r=!1;for(let e of n)try{await J(await V,e)}catch(n){if(r=!0,n instanceof U)"EEXIST"===n.code?t("mkdir: ".concat(e,": file exists")):"ENOENT"===n.code&&t("mkdir: ".concat(e,": no such file or directory"));else throw n}return r?1:0},autocompleter:X(!0)};async function ee(e){let t=localStorage.getItem("wd");if(void 0===e){let e=localStorage.getItem(w);if(null===e)throw new U("ENOENT","home directory not found");localStorage.setItem(g,e),localStorage.setItem("wd","/"),t&&localStorage.setItem("owd",t)}else{let n=await q(await V,e),r=await (await V).transaction("inodes","readonly").objectStore("inodes").get(n);if(void 0===r)throw new U("ENOENT","could not load inode");if("directory"!==r.mode)throw new U("ENOTDIR","inode is not a directory");let o=s.normalize(e);if(null===t)throw new U("EGREGIOUS","missing directory information");let i=s.isAbsolute(o)?o:s.normalize(t+"/"+o);"/"!==i&&i.endsWith("/")&&(i=i.slice(0,-1)),localStorage.setItem(g,n.toString()),localStorage.setItem("wd",i),localStorage.setItem("owd",t)}}let et={executor:async(e,t)=>{let n;if(e.length>2)return t("cd: too many arguments"),1;let[r,o]=e;if(void 0===r)n="/";else if(void 0===o){if("-"===r){let e=localStorage.getItem("owd");if(null===e)return t("cd: missing old pwd"),2;n=e}else n=r}else{let e=localStorage.getItem("wd");if(null===e)return t("cd: missing pwd"),2;if(!e.includes(r))return t("cd: string not in pwd: ".concat(r)),3;n=e.replace(r,o)}try{await ee(n)}catch(e){if(e instanceof U){if("ENOENT"===e.code)return t("cd: no such file or directory: ".concat(n)),1;if("ENOTDIR"===e.code)return t("cd: not a directory: ".concat(n)),1}else throw e}return 0},autocompleter:X(!0)};async function en(e,t){var n;let r=t.split("/").filter(Boolean),o=s.isAbsolute(t),i=null!==(n=r.pop())&&void 0!==n?n:".",a=(o?"/":"")+r.join("/"),c=await q(e,a),{directoryContents:l,modifiedTime:d}=await Y(e,a),u=l.get(i);if(void 0===u)throw new U("ENOENT","file does not exist");let f=localStorage.getItem(w);if(null===f)throw new U("EGREGIOUS","missing root dir inode id");let m=parseInt(f);if(isNaN(m))throw new U("EGREGIOUS","invalid root dir inode id");if(u===m)throw new U("EBUSY","cannot delete root directory");let{directoryContents:p,modifiedTime:h}=await Y(e,t);if(p.size>2)throw new U("ENOTEMPTY","directory not empty");let g=e.transaction(["inodes","blobs"],"readwrite"),y=g.objectStore("inodes"),v=g.objectStore("blobs"),E=await y.get(c);if(!E)throw new U("ENOENT","parent directory inode not found");if(E.modifiedTime>d)throw new U("EIO","parent directory inode write race condition");let I=await y.get(u);if(!I)throw new U("ENOENT","target directory inode not found");if(I.modifiedTime>h)throw new U("EIO","target directory inode write race condition");await v.delete(I.blobId),await y.delete(u),l.delete(i);let S=new Date,T=b(l);await v.put(T,E.blobId),await y.put({...E,accessedTime:S,modifiedTime:S},c)}let er={executor:async(e,t)=>{let{positionals:n}=G(e);if(0===n.length)return t("rmdir: must supply directory name"),64;let r=!1;for(let e of n){let n=s.normalize(e);if("/"===n)return t("rmdir: /: cannot remove root directory"),1;if("."===(n=n.replace(/\/$/,"")))return t("rmdir: .: invalid argument"),1;try{await en(await V,e)}catch(n){if(r=!0,n instanceof U)"ENOENT"===n.code?t("rmdir: ".concat(e,": no such file or directory")):"ENOTEMPTY"===n.code?t("rmdir: ".concat(e,": directory not empty")):"ENOTDIR"===n.code&&t("rmdir: ".concat(e,": not a directory"));else throw n}}return r?1:0},autocompleter:X(!0)};async function eo(e,t){var n;let r=t.split("/").filter(Boolean),o=s.isAbsolute(t),i=null!==(n=r.pop())&&void 0!==n?n:".",a=(o?"/":"")+r.join("/"),{directoryContents:c}=await Y(e,a),l=e.transaction(["inodes","blobs"],"readonly"),d=l.objectStore("inodes"),u=l.objectStore("blobs"),f=c.get(i);if(void 0===f)throw new U("ENOENT","file does not exist");let m=await d.get(f);if(!m)throw new U("ENOENT","file inode not found");if("file"!==m.mode)throw new U("EISDIR","inode is a directory");let{blobId:p}=m,h=await u.get(p);if(!h)throw new U("ENOENT","file blob not found");return h}let ei={executor:async(e,t)=>{let{positionals:n}=G(e);if(0===n.length)return 0;let r=!1;for(let e of n)try{let n=await eo(await V,e),r=await n.text();t(r)}catch(n){if(r=!0,n instanceof U)"ENOENT"===n.code?t("cat: ".concat(e,": no such file or directory")):"EISDIR"===n.code&&t("cat: ".concat(e,": is a directory"));else throw n}return r?1:0},autocompleter:X()};async function ea(e,t,n){var r;let o=t.split("/").filter(Boolean),i=s.isAbsolute(t),a=null!==(r=o.pop())&&void 0!==r?r:".",c=(i?"/":"")+o.join("/"),l=await q(e,c),{directoryContents:d,modifiedTime:u}=await Y(e,c);if(d.has(a))throw new U("EEXIST","file already exists");let f=e.transaction(["inodes","blobs"],"readwrite"),m=f.objectStore("inodes"),p=f.objectStore("blobs"),h=await m.get(l);if(!h)throw new U("ENOENT","directory inode not found");if(h.modifiedTime>u)throw new U("EIO","directory inode write race condition");let w=new Date,g=await p.add(n),y=await m.add({mode:"file",size:n.size,accessedTime:w,modifiedTime:w,createdTime:w,linkCount:1,blobId:g});d.set(a,y);let v=b(d);await p.put(v,h.blobId),await m.put({...h,accessedTime:w,modifiedTime:w},l)}let es=async(e,t)=>{let{positionals:n}=G(e);if(0===n.length)return t("touch: must supply file name"),1;for(let e of n){try{await F(await V,e);break}catch(e){if(!(e instanceof U&&"ENOENT"===e.code))throw e}await ea(await V,e,new Blob)}return 0},ec={executor:async(e,t)=>{let{positionals:n}=G(e);if(0===n.length)return 0;let r=!1;for(let e of n){if(!e.endsWith(".url")){r=!0,t("open: no application configured for ".concat(e));continue}try{let n=await eo(await V,e),o=(await n.text()).split("\n").map(e=>e.match(/^ *URL *= *(.*[^ ]) *$/)).find(e=>!!e);void 0===o||void 0===o[1]?(r=!0,t("open: invalid .url file")):window.open(o[1])}catch(n){if(r=!0,n instanceof U)"ENOENT"===n.code?t("open: ".concat(e,": no such file or directory")):"EISDIR"===n.code&&t("open: ".concat(e,": is a directory"));else throw n}}return r?1:0},autocompleter:X()},el=new Map(Object.entries({echo:{executor:(e,t)=>(t(e.join(" ")),0)},ls:Q,mkdir:Z,rmdir:er,pwd:{executor:(e,t)=>{let{positionals:n}=G(e);if(n.length)return t("pwd: too many arguments"),1;let r=localStorage.getItem("wd");return null===r?(t("pwd: missing directory information"),3):(t(r),0)}},cd:et,cat:ei,touch:{executor:es},open:ec})),ed=new h(Array.from(el.keys())),eu=async(e,t,n)=>{let r=el.get(e);if(void 0===r)return n("rmsh: command not found: ".concat(e)),127;try{return await r.executor(t,n)}catch(e){return console.error(e),n(e instanceof Error?"rmsh: process crashed: ".concat(e.message):"rmsh: process crashed"),127}};async function ef(e,t,n){let r=el.get(e);if(void 0===r)return{matchType:"none"};let o=r.autocompleter;return o?await o(t,n):{matchType:"none"}}async function em(e){var t;let n=(0,p.Vl)(e),r=null!==(t=n[0])&&void 0!==t?t:"";if(r===e)return{replaced:r,result:ed.autocomplete(r)};let o=n.slice(1),i=o[o.length-1];return void 0!==i&&e.endsWith(i)?(o.pop(),{replaced:i,result:await ef(r,o,i)}):{replaced:"",result:await ef(r,o,"")}}function ep(e){let{options:t}=e;return(0,c.jsx)(c.Fragment,{children:t.map((e,t)=>(0,c.jsx)("div",{className:"whitespace-pre break-all",children:e},t))})}function eh(e){let{writeLine:t,onExecutionStart:n,onExecutionEnd:r}=e,[o,i]=(0,l.useState)([]),a=(0,l.useCallback)(async e=>{t("> "+e);let o=(0,p.Vl)(e),i=o[0];if(void 0!==i){n();try{await eu(i,o.slice(1),t)}catch(e){}r()}},[r,n,t]),s=(0,l.useCallback)(async e=>{let{replaced:t,result:n}=await em(e);switch(n.matchType){case"none":return e;case"one":return ew(e,t,n.match)+" ";case"many":return i(n.matches),ew(e,t,n.prefix)}},[]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(m,{prompt:"> ",submitLine:e=>{a(e)},autocomplete:s}),o.length>0&&(0,c.jsx)(ep,{options:o})]})}let ew=(e,t,n)=>{let r=e.lastIndexOf(t);return e.slice(0,r)+n}}}]);