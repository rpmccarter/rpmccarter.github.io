(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5828:function(e,t,n){Promise.resolve().then(n.bind(n,7473))},6081:function(e,t){"use strict";t.Vl=void 0;var n,r,s,a=RegExp((n||(r=['\ns*                     # Leading whitespace\n(?=(                      # Mimic "(?>)" -> http://blog.stevenlevithan.com/archives/mimic-atomic-groups\n  ([^s\\\'"]+)          # Normal words\n  |                       #\n  \'([^\']*)\'              # Stuff in single quotes\n  |                       #\n  "((?:[^"\\]|\\.)*)"    # Stuff in double quotes\n  |                       #\n  (\\.?)                  # Escaped character\n  |                       #\n  (S)                    # Garbage\n))1                      #\n(s|$)?                 # Seperator\n'],s=['\n\\s*                     # Leading whitespace\n(?=(                      # Mimic "(?>)" -> http://blog.stevenlevithan.com/archives/mimic-atomic-groups\n  ([^\\s\\\\\\\'\\"]+)          # Normal words\n  |                       #\n  \'([^\\\']*)\'              # Stuff in single quotes\n  |                       #\n  "((?:[^\\"\\\\]|\\\\.)*)"    # Stuff in double quotes\n  |                       #\n  (\\\\.?)                  # Escaped character\n  |                       #\n  (\\S)                    # Garbage\n))\\1                      #\n(\\s|$)?                 # Seperator\n'],Object.defineProperty?Object.defineProperty(r,"raw",{value:s}):r.raw=s,n=r)).raw[0].replace(/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,""),"m");function l(e,t){var n=[],r="",s="";return!function(e,t,n){for(var r,s="";e.length;)(r=e.match(t))?(s+=e.slice(0,r.index)+n(r),e=e.slice(r.index+r[0].length)):(s+=e,e="")}(e,a,function(e){var a=e[0],l=e[2],i=e[3],c=e[4],o=e[5],u=e[6],h=e[7];if("string"==typeof u)throw Error("Unmatched quote");if(s+=a,r+=l||i||c&&c.replace(/\\([$`"\\\n])/g,"$1")||(o||"").replace(/\\(.)/g,"$1"),"string"==typeof h||""===i||""===c)return n.push(r),"function"==typeof t&&t(s),s="",r=""}),r&&(n.push(r),"function"==typeof t&&t(s)),n}function i(e){return e?e.replace(/[^A-Za-z0-9_\-.,:+\/@\n]/g,"\\$&").replace(/\n/g,"'\n'"):"''"}function c(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(i(r))}return t.join(" ")}t.Vl=l,new function(){this.split=l,this.escape=i,this.join=c}},7473:function(e,t,n){"use strict";n.r(t),n.d(t,{Terminal:function(){return j}});var r=n(3827),s=n(4090);let a=e=>{let{char:t}=e;return(0,r.jsx)("span",{className:"animate-blink whitespace-pre",children:null!=t?t:" "})},l=e=>{let t=(0,s.useCallback)(t=>{t.metaKey||t.ctrlKey||t.key.length>1||(t.preventDefault(),null==e||e(t.key))},[e]);(0,s.useEffect)(()=>(addEventListener("keydown",t),()=>removeEventListener("keydown",t)),[t])},i=(e,t)=>{let n=(0,s.useCallback)(n=>{("string"==typeof e?n.key===e:e.includes(n.key))&&(n.preventDefault(),null==t||t(n.key))},[t,e]);(0,s.useEffect)(()=>(addEventListener("keydown",n),()=>removeEventListener("keydown",n)),[n])},c=(e,t,n)=>{let r=(0,s.useCallback)(r=>{let s="string"==typeof t?r[t]:t.every(e=>r[e]);r.key===e&&s&&(r.preventDefault(),null==n||n())},[n,e,t]);(0,s.useEffect)(()=>(addEventListener("keydown",r),()=>removeEventListener("keydown",r)),[r])},o=e=>{let{submitLine:t,prompt:n,autocomplete:o}=e,[u,h]=(0,s.useState)(""),[d,p]=(0,s.useState)(0),[f,m]=(0,s.useState)("");l(e=>{h(t=>t.substring(0,d)+e+t.substring(d)),p(e=>e+1)}),c("a","ctrlKey",()=>p(0)),c("e","ctrlKey",()=>p(u.length)),c("Backspace","metaKey",()=>{h(""),p(0)}),c("u","ctrlKey",()=>{m(u),h(""),p(0)}),c("y","ctrlKey",()=>{h(u.slice(0,d)+f+u.slice(d)),p(e=>e+f.length)}),i("Enter",()=>{t(u)}),i("Tab",()=>{let e=o(u);h(e),p(e.length)}),i("Backspace",()=>{h(e=>e.substring(0,d-1)+e.substring(d)),p(e=>Math.max(e-1,0))}),i("ArrowLeft",()=>{p(e=>Math.max(e-1,0))}),i("ArrowRight",()=>{p(e=>Math.min(e+1,u.length))});let y=u.substring(0,d),g=u.codePointAt(d),v=void 0!==g?String.fromCodePoint(g):void 0,w=u.substring(d+1);return(0,r.jsxs)("div",{className:"whitespace-pre max-w-full text-wrap break-all",children:[n,y,(0,r.jsx)(a,{char:v},d),w]})};var u=n(6081);class h{add(e){let t=this.data;for(let n of e)t.rest.hasOwnProperty(n)||(t.rest[n]={rest:{},end:!1}),t=t.rest[n];t.end=!0}has(e){let t=this.data;for(let n of e){if(!t.rest.hasOwnProperty(n))return!1;t=t.rest[n]}return t.end}autocomplete(e){let t=this.data;for(let n of e){if(!t.rest.hasOwnProperty(n))return{matchType:"none"};t=t.rest[n]}let n=[];for(;1===Object.keys(t.rest).length&&!t.end;){let e=Object.keys(t.rest)[0];n.push(e),t=t.rest[e]}let r=e+n.join("");return 0===Object.keys(t.rest).length?{matchType:"one",match:r}:{matchType:"many",prefix:r,matches:h.getWords(t,r)}}allWords(){return h.getWords(this.data)}static getWords(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.entries(e.rest).flatMap(e=>{let[n,r]=e;return this.getWords(r,t+n)});return e.end&&n.push(t),n}constructor(e){this.data={rest:{},end:!1},null==e||e.forEach(e=>this.add(e))}}let d={echo:{executor:(e,t)=>(t(e.join(" ")),0)}},p=new h(Object.keys(d)),f=async(e,t,n)=>d.hasOwnProperty(e)?d[e].executor(t,n):(n("rmsh: command not found: ".concat(e)),127),m=(e,t,n)=>{if(!d.hasOwnProperty(e))return{matchType:"none"};let r=d[e].autocompleter;return r?r(t,n):{matchType:"none"}},y=e=>p.autocomplete(e),g=e=>{var t;let n=(0,u.Vl)(e),r=null!==(t=n[0])&&void 0!==t?t:"";if(r===e)return{replaced:r,result:y(r)};let s=n.slice(1),a=s[s.length-1];return void 0!==a&&e.endsWith(a)?(s.pop(),{replaced:a,result:m(r,s,a)}):{replaced:"",result:m(r,s,"")}},v=e=>{let{options:t}=e;return(0,r.jsx)(r.Fragment,{children:t.map((e,t)=>(0,r.jsx)("div",{className:"whitespace-pre break-all",children:e},t))})},w=e=>{let{writeLine:t,onExecutionStart:n,onExecutionEnd:a}=e,[l,i]=(0,s.useState)([]),c=(0,s.useCallback)(async e=>{t("> "+e);let r=(0,u.Vl)(e),s=r[0];if(void 0!==s){n();try{await f(s,r.slice(1),t)}catch(e){}a()}},[a,n,t]),h=(0,s.useCallback)(e=>{let{replaced:t,result:n}=g(e);switch(n.matchType){case"none":return e;case"one":return b(e,t,n.match)+" ";case"many":return i(n.matches),b(e,t,n.prefix)}},[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o,{prompt:"> ",submitLine:c,autocomplete:h}),l.length>0&&(0,r.jsx)(v,{options:l})]})},b=(e,t,n)=>{let r=e.lastIndexOf(t);return e.slice(0,r)+n},k=e=>{let{text:t}=e;return(0,r.jsx)("div",{className:"whitespace-pre break-all",children:t})},x=(0,s.createContext)({}),j=()=>{let[e,t]=(0,s.useState)([]),[n,a]=(0,s.useState)(!0),l=(0,s.useCallback)(e=>{t(t=>[...t,e])},[]);return c("l","ctrlKey",()=>{t([])}),(0,s.useEffect)(()=>{setTimeout(()=>{l("rmsh v0.0.1")},300),setTimeout(()=>{l("much more coming soon..."),a(!1)},600)},[]),(0,r.jsx)(x.Provider,{value:{PWD:"/"},children:(0,r.jsxs)("div",{className:"min-h-screen w-screen overflow-hidden text-lime-500 font-mono",children:[e.map((e,t)=>(0,r.jsx)(k,{text:e},t)),!n&&(0,r.jsx)(w,{writeLine:l,onExecutionStart:()=>a(!0),onExecutionEnd:()=>a(!1)},e.length)]})})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=5828)}),_N_E=e.O()}]);